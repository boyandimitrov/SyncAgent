[
    {
        "source" : "es",
        "target" : "bq",
        "es": "system",
        "bq": "tenant_objects",
        "mapping": [
            {
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "bq_column": "id_unknown",
                "bq_type": "STRING"
            },
            {
                "bq_column": "id_type",
                "bq_type": "STRING"
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es" : "promoto-country_v2",
        "bq" : "country",
        "sync_batch_size" : 100,
        "id_column" : "id.keyword",
        "sync_id_column" : "id",
        "sync_column" : "@timestamp",
        "mapping" : [
            {
                "es_column": "@timestamp",
                "es_type": "date",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "native",
                "es_type": "string",
                "bq_column": "native",
                "bq_type": "STRING"
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es" : "promoto-city_v2",
        "bq" : "city",
        "sync_batch_size" : 100,
        "id_column" : "id.keyword",
        "sync_id_column" : "id",
        "sync_column" : "@timestamp",
        "mapping" : [
            {
                "es_column" : "id",
                "es_type" : "string",
                "bq_column" : "id",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "name",
                "es_type" : "string",
                "bq_column" : "name",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "name_bg",
                "es_type" : "string",
                "bq_column" : "name_bg",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "location",
                "es_type" : "object",
                "strategy" : "flat",
                "flatten" : [
                    {
                        "es_column" : "lon",
                        "es_type" : "float",
                        "bq_column" : "longitude",
                        "bq_type" : "FLOAT64"
                    },
                    {
                        "es_column" : "lat",
                        "es_type" : "float",
                        "bq_column" : "latitude",
                        "bq_type" : "FLOAT64"
                    }
                ]
            },
            {
                "es_column" : "country",
                "es_type" : "string",
                "bq_column" : "fk_country",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "area",
                "es_type" : "string",
                "bq_column" : "area",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "@timestamp",
                "es_type" : "string",
                "bq_column" : "timestamp",
                "bq_type" : "TIMESTAMP"
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-manufacturer_v2",
        "bq": "manufacturer",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "@timestamp",
                "es_type": "date",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "vat",
                "es_type": "integer",
                "bq_column": "vat",
                "bq_type": "INT64"
            },
            {
                "es_column": "currency",
                "es_type": "string",
                "bq_column": "currency",
                "bq_type": "STRING"
            },
            {
                "es_column": "country",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_country",
                        "bq_type": "string"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es" : "promoto-user_v2",
        "bq" : "users",
        "sync_batch_size" : 2,
        "id_column" : "id.keyword",
        "sync_id_column" : "id",
        "sync_column" : "@timestamp",
        "mapping" : [
            {
                "es_column" : "id",
                "es_type" : "string",
                "bq_column" : "id",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "name",
                "es_type" : "string",
                "bq_column" : "name",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "type",
                "es_type" : "string",
                "bq_column" : "type",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "email",
                "es_type" : "string",
                "bq_column" : "email",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "role",
                "es_type" : "string",
                "bq_column" : "role",
                "bq_type" : "STRING"
            },
            {
                "es_column": "company",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_manufacturer",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "@timestamp",
                "es_type": "date",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-distributor_v2",
        "bq": "distributor",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "country",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_country",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "identifier",
                "es_type": "string",
                "bq_column": "identifier",
                "bq_type": "STRING"
            },
            {
                "es_column": "address",
                "es_type": "string",
                "bq_column": "address",
                "bq_type": "STRING"
            },
            {
                "es_column": "city",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_city",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "date_created",
                "es_type": "string",
                "bq_column": "date_created",
                "bq_type": "TIMESTAMP",
                "transfromer": "string_to_timestamp"
            },
            {
                "es_column": "vat",
                "es_type": "integer",
                "bq_column": "vat",
                "bq_type": "INT64"
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "logo",
                "es_type": "string",
                "bq_column": "logo",
                "bq_type": "STRING"
            },
            {
                "es_column": "currency",
                "es_type": "string",
                "bq_column": "currency",
                "bq_type": "STRING"
            },
            {
                "es_column": "location",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "lon",
                        "es_type": "float",
                        "bq_column": "longitude",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "lat",
                        "es_type": "float",
                        "bq_column": "latitude",
                        "bq_type": "FLOAT64"
                    }
                ]
            },
            {
                "es_column": "@timestamp",
                "es_type": "string",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "distributor",
                        "bq_type" : "STRING"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-market_v2",
        "bq": "market",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "country",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_country",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "logo",
                "es_type": "string",
                "bq_column": "logo",
                "bq_type": "STRING"
            },
            {
                "es_column": "currency",
                "es_type": "string",
                "bq_column": "currency",
                "bq_type": "STRING"
            },
            {
                "es_column": "vat",
                "es_type": "integer",
                "bq_column": "vat",
                "bq_type": "INT64"
            },
            {
                "es_column": "identifier",
                "es_type": "string",
                "bq_column": "identifier",
                "bq_type": "STRING"
            },
            {
                "es_column": "address",
                "es_type": "string",
                "bq_column": "address",
                "bq_type": "STRING"
            },
            {
                "es_column": "headmaster",
                "es_type": "string",
                "bq_column": "headmaster",
                "bq_type": "STRING"
            },
            {
                "es_column": "city",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_city",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "location",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "lon",
                        "es_type": "float",
                        "bq_column": "longitude",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "lat",
                        "es_type": "float",
                        "bq_column": "latitude",
                        "bq_type": "FLOAT64"
                    }
                ]
            },
            {
                "es_column": "@timestamp",
                "es_type": "string",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "market",
                        "bq_type" : "STRING"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-store_v2",
        "bq": "store",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "currency",
                "es_type": "string",
                "bq_column": "currency",
                "bq_type": "STRING"
            },
            {
                "es_column": "vat",
                "es_type": "int",
                "bq_column": "vat",
                "bq_type": "INT64"
            },
            {
                "es_column": "@timestamp",
                "es_type": "date",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "country",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_country",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "company",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_manufacturer",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "store",
                        "bq_type" : "STRING"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-vehicle_v2",
        "bq": "vehicle",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "image",
                "es_type": "string",
                "bq_column": "image",
                "bq_type": "STRING"
            },
            {
                "es_column": "identifier",
                "es_type": "string",
                "bq_column": "identifier",
                "bq_type": "STRING"
            },
            {
                "es_column": "@timestamp",
                "es_type": "date",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "registration_number",
                "es_type": "string",
                "bq_column": "registration_number",
                "bq_type": "STRING"
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "model",
                "es_type": "string",
                "bq_column": "model",
                "bq_type": "STRING"
            },
            {
                "es_column": "type",
                "es_type": "string",
                "bq_column": "type",
                "bq_type": "STRING"
            },
            {
                "es_column": "company",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_manufacturer",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "position",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "location",
                        "es_type": "object",
                        "strategy": "flat",
                        "flatten": [
                            {
                                "es_column": "lon",
                                "es_type": "float",
                                "bq_column": "longitude",
                                "bq_type": "FLOAT64"
                            },
                            {
                                "es_column": "lat",
                                "es_type": "float",
                                "bq_column": "latitude",
                                "bq_type": "FLOAT64"
                            }
                        ]
                    }
                ]
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "vehicle",
                        "bq_type" : "STRING"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-product_base_v2",
        "bq": "product_base",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "name_bg",
                "es_type": "string",
                "bq_column": "name_bg",
                "bq_type": "STRING"
            },
            {
                "es_column": "active",
                "es_type": "boolean",
                "bq_column": "active",
                "bq_type": "BOOL"
            },
            {
                "es_column": "@timestamp",
                "es_type": "date",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "manufacturer",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_manufacturer",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "category",
                "es_type": "object",
                "strategy": "foreign_key_array_last",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_category",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "expiryPeriod",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "int",
                        "bq_column": "value",
                        "bq_type": "INT64"
                    },
                    {
                        "es_column": "dimension",
                        "es_type": "string",
                        "bq_column": "dimenstion",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "product_base",
                        "bq_type" : "STRING"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-product_v2",
        "bq": "product",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "name_bg",
                "es_type": "string",
                "bq_column": "name_bg",
                "bq_type": "STRING"
            },
            {
                "es_column": "active",
                "es_type": "boolean",
                "bq_column": "active",
                "bq_type": "BOOL"
            },
            {
                "es_column": "measurable",
                "es_type": "boolean",
                "bq_column": "measurable",
                "bq_type": "BOOL"
            },
            {
                "es_column": "weightInBarcode",
                "es_type": "boolean",
                "bq_column": "weightInBarcode",
                "bq_type": "BOOL"
            },
            {
                "es_column": "@timestamp",
                "es_type": "date",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "image",
                "es_type": "string",
                "bq_column": "image",
                "bq_type": "STRING"
            },
            {
                "es_column": "description_bg",
                "es_type": "string",
                "bq_column": "description_bg",
                "bq_type": "STRING"
            },
            {
                "es_column": "code",
                "es_type": "string",
                "bq_column": "code",
                "bq_type": "STRING"
            },
            {
                "es_column": "receiptName_bg",
                "es_type": "string",
                "bq_column": "receiptName_bg",
                "bq_type": "STRING"
            },
            {
                "es_column": "expiryPeriod",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "int",
                        "bq_column": "expiryPeriodValue",
                        "bq_type": "INT64"
                    },
                    {
                        "es_column": "dimension",
                        "es_type": "string",
                        "bq_column": "expiryPeriodDimenstion",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "packaging",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "packagingValue",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "dimension",
                        "es_type": "string",
                        "bq_column": "packagingDimenstion",
                        "bq_type": "STRING"
                    },
                    {
                        "es_column": "type",
                        "es_type": "string",
                        "bq_column": "packagingType",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "price",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "originalPrice",
                        "es_type": "object",
                        "strategy": "flat",
                        "flatten": [
                            {
                                "es_column": "value",
                                "es_type": "float",
                                "bq_column": "priceValue",
                                "bq_type": "FLOAT64"
                            },
                            {
                                "es_column": "currency",
                                "es_type": "string",
                                "bq_column": "priceCurrency",
                                "bq_type": "STRING"
                            }
                        ]
                    },
                    {
                        "es_column": "sortPrice",
                        "es_type": "float",
                        "bq_column": "priceSortPrice",
                        "bq_type": "FLOAT64"
                    }
                ]
            },
            {
                "es_column": "manufacturer",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_manufacturer",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "productBase",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_product_base",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "category",
                "es_type": "object",
                "strategy": "foreign_key_array_last",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_category",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "product",
                        "bq_type" : "STRING"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-stock_v2",
        "bq": "stock",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "name_bg",
                "es_type": "string",
                "bq_column": "name_bg",
                "bq_type": "STRING"
            },
            {
                "es_column": "active",
                "es_type": "boolean",
                "bq_column": "active",
                "bq_type": "BOOL"
            },
            {
                "es_column": "weightInBarcode",
                "es_type": "boolean",
                "bq_column": "weightInBarcode",
                "bq_type": "BOOL"
            },
            {
                "es_column": "@timestamp",
                "es_type": "date",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "description_bg",
                "es_type": "string",
                "bq_column": "description_bg",
                "bq_type": "STRING"
            },
            {
                "es_column": "code",
                "es_type": "string",
                "bq_column": "code",
                "bq_type": "STRING"
            },
            {
                "es_column": "expiryPeriod",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "int",
                        "bq_column": "expiryPeriodValue",
                        "bq_type": "INT64"
                    },
                    {
                        "es_column": "dimension",
                        "es_type": "string",
                        "bq_column": "expiryPeriodDimenstion",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "packaging",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "packagingValue",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "dimension",
                        "es_type": "string",
                        "bq_column": "packagingDimenstion",
                        "bq_type": "STRING"
                    },
                    {
                        "es_column": "type",
                        "es_type": "string",
                        "bq_column": "packagingType",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "price",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "originalPrice",
                        "es_type": "object",
                        "strategy": "flat",
                        "flatten": [
                            {
                                "es_column": "value",
                                "es_type": "float",
                                "bq_column": "priceValue",
                                "bq_type": "FLOAT64"
                            },
                            {
                                "es_column": "currency",
                                "es_type": "string",
                                "bq_column": "priceCurrency",
                                "bq_type": "STRING"
                            }
                        ]
                    },
                    {
                        "es_column": "sortPrice",
                        "es_type": "float",
                        "bq_column": "priceSortPrice",
                        "bq_type": "FLOAT64"
                    }
                ]
            },
            {
                "es_column": "purchasePrice",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "originalPrice",
                        "es_type": "object",
                        "strategy": "flat",
                        "flatten": [
                            {
                                "es_column": "value",
                                "es_type": "float",
                                "bq_column": "purchasePriceValue",
                                "bq_type": "FLOAT64"
                            },
                            {
                                "es_column": "currency",
                                "es_type": "string",
                                "bq_column": "purchasePriceCurrency",
                                "bq_type": "STRING"
                            }
                        ]
                    },
                    {
                        "es_column": "sortPrice",
                        "es_type": "float",
                        "bq_column": "purchasePriceSortPrice",
                        "bq_type": "FLOAT64"
                    }
                ]
            },
            {
                "es_column": "ownerType",
                "es_type": "string",
                "bq_column": "ownerType",
                "bq_type": "STRING"
            },
            {
                "es_column": "dateOfManufacture",
                "es_type": "date",
                "bq_column": "dateOfManufacture",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "stock",
                        "bq_type" : "STRING"
                    }
                ]
            },
            {
                "es_column": "manufacturer",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_manufacturer",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "minQuantity",
                "es_type": "int",
                "bq_column": "minQuantity",
                "bq_type": "INT64"
            },
            {
                "es_column": "currentQuantity",
                "es_type": "int",
                "bq_column": "currentQuantity",
                "bq_type": "INT64"
            },
            {
                "es_column": "measurable",
                "es_type": "boolean",
                "bq_column": "measurable",
                "bq_type": "BOOLEAN"
            },
            {
                "es_column": "normalQuantity",
                "es_type": "int",
                "bq_column": "normalQuantity",
                "bq_type": "INT64"
            },
            {
                "es_column": "whenNotInStock",
                "es_type": "string",
                "bq_column": "whenNotInStock",
                "bq_type": "STRING"
            },
            {
                "es_column": "image",
                "es_type": "string",
                "bq_column": "image",
                "bq_type": "STRING"
            },
            {
                "es_column": "product",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_product",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "store",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_store",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "distributor",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_distributor",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "productBase",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_productBase",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "lastDeliveryDate",
                "es_type": "date",
                "bq_column": "lastDeliveryDate",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "receiptName_bg",
                "es_type": "string",
                "bq_column": "receiptName_bg",
                "bq_type": "STRING"
            },
            {
                "es_column": "category",
                "es_type": "object",
                "strategy": "foreign_key_array_last",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_category",
                        "bq_type": "string"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-invoice_number_v2",
        "bq": "invoice_number",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "invoice_number",
                        "bq_type" : "STRING"
                    }
                ]
            },
            {
                "es_column" : "invoiceNo",
                "bq_column" : "invoice_no",
                "es_type" : "long",
                "bq_type" : "INTEGER"
            },
            {
                "es_column" : "numberLength",
                "bq_column" : "number_length",
                "es_type" : "long",
                "bq_type" : "INTEGER"
            },
            {
                "es_column" : "prefix",
                "bq_column" : "prefix",
                "es_type" : "string",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "suffix",
                "bq_column" : "suffix",
                "es_type" : "string",
                "bq_type" : "STRING"
            },
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "@timestamp",
                "es_type": "string",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-invoice_rule_v2",
        "bq": "invoice_rule",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column" : "invoiceGenerationMethod",
                "bq_column" : "invoice_generation_method",
                "es_type" : "string",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "@timestamp",
                "bq_column" : "timestamp",
                "es_type" : "date",
                "bq_type" : "TIMESTAMP"
            },
            {
                "es_column" : "invoicePeriod",
                "bq_column" : "invoice_period",
                "es_type" : "string",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "date_created",
                "bq_column" : "date_created",
                "es_type" : "date",
                "bq_type" : "TIMESTAMP"
            },
            {
                "es_column" : "creditTerm",
                "bq_column" : "credit_term",
                "es_type" : "long",
                "bq_type" : "INTEGER"
            },
            {
                "es_column" : "paymentMethod",
                "bq_column" : "payment_method",
                "es_type" : "string",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "id",
                "bq_column" : "id",
                "es_type" : "string",
                "bq_type" : "STRING"
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "invoice_rule",
                        "bq_type" : "STRING"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-shopping_cart_v2",
        "bq": "shopping_cart",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "image",
                "es_type": "string",
                "bq_column": "image",
                "bq_type": "STRING"
            },
            {
                "es_column": "code",
                "es_type": "string",
                "bq_column": "code",
                "bq_type": "STRING"
            },
            {
                "es_column": "quantity",
                "es_type": "integer",
                "bq_column": "quantity",
                "bq_type": "INT64"
            },
            {
                "es_column": "date_created",
                "es_type": "date",
                "bq_column": "date_created",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "@timestamp",
                "es_type": "date",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "userId",
                "es_type": "string",
                "bq_column": "userId",
                "bq_type": "STRING"
            },
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "store",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_store",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "stock",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_stock",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "shopping_cart",
                        "bq_type" : "STRING"
                    }
                ]
            },
            {
                "es_column": "total_price",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "total_price_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "total_price_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "total_price_no_vat",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "total_price_no_vat_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "total_price_no_vat_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "single_promotion_discount_price",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "single_promotion_discount_price_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "single_promotion_discount_price_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "total_promotion_discount_price_no_vat",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "total_promotion_discount_price_no_vat_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "total_promotion_discount_price_no_vat_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "single_promotion_discount_price_no_vat",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "single_promotion_discount_price_no_vat_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "single_promotion_discount_price_no_vat_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "total_promotion_discount_price",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "total_promotion_discount_price_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "total_promotion_discount_price_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "single_price",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "single_price_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "single_price_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "single_price_no_vat",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "single_price_no_vat_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "single_price_no_vat_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "price",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "originalPrice",
                        "es_type": "object",
                        "strategy": "flat",
                        "flatten": [
                            {
                                "es_column": "value",
                                "es_type": "float",
                                "bq_column": "originalPrice_value",
                                "bq_type": "FLOAT64"
                            },
                            {
                                "es_column": "currency",
                                "es_type": "string",
                                "bq_column": "originalPrice_currency",
                                "bq_type": "STRING"
                            }
                        ]
                    },
                    {
                        "es_column": "sortPrice",
                        "es_type": "float",
                        "bq_column": "sortPrice",
                        "bq_type": "FLOAT64"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-shop_v2",
        "bq": "shop",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "bridges" : [
            {
                "bq" : "shop_email",
                "mapping" : [
                    {
                        "bq_column" : "id",
                        "bq_type" : "STRING"
                    },
                    {
                        "bq_column" : "id_shop",
                        "bq_type" : "STRING"
                    },
                    {
                        "bq_column" : "email",
                        "bq_type" : "STRING"
                    }
                ]
            },       
            {
                "bq" : "shop_phone",
                "mapping" : [
                    {
                        "bq_column" : "id",
                        "bq_type" : "STRING"
                    },
                    {
                        "bq_column" : "id_shop",
                        "bq_type" : "STRING"
                    },
                    {
                        "bq_column" : "phone",
                        "bq_type" : "STRING"
                    }
                ]
            }       
        ],
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "identifier",
                "es_type": "string",
                "bq_column": "identifier",
                "bq_type": "STRING"
            },
            {
                "es_column": "country",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_country",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "address",
                "es_type": "string",
                "bq_column": "address",
                "bq_type": "STRING"
            },
            {
                "es_column" : "phone",
                "es_type" : "object",
                "strategy" : "foreign_key_lookup",
                "fk" : [
                    {
                        "es_column" : "value",
                        "es_type" : "string",
                        "bq_bridge" : "shop_phone",
                        "bq_column" : "id_shop",
                        "bq_type" : "STRING",
                        "bq_column_value" : "phone"
                    }
                ]
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "vat",
                "es_type": "integer",
                "bq_column": "vat",
                "bq_type": "INT64"
            },
            {
                "es_column": "company",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_manufacturer",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "currency",
                "es_type": "string",
                "bq_column": "currency",
                "bq_type": "STRING"
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "shop",
                        "bq_type" : "STRING"
                    }
                ]
            },
            {
                "es_column" : "email",
                "es_type" : "object",
                "strategy" : "foreign_key_lookup",
                "fk" : [
                    {
                        "es_column" : "value",
                        "es_type" : "string",
                        "bq_bridge" : "shop_email",
                        "bq_column" : "id_shop",
                        "bq_type" : "STRING",
                        "bq_column_value" : "email"
                    }
                ]
            },
            {
                "es_column": "@timestamp",
                "es_type": "string",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-checkout_v2",
        "bq": "checkout",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "identifier",
                "es_type": "string",
                "bq_column": "identifier",
                "bq_type": "STRING"
            },
            {
                "es_column": "shop",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_shop",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "company",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_manufacturer",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "checkout",
                        "bq_type" : "STRING"
                    }
                ]
            },
            {
                "es_column": "@timestamp",
                "es_type": "string",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-price_group_v2",
        "bq": "price_group",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "description",
                "es_type": "string",
                "bq_column": "description",
                "bq_type": "STRING"
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "price_group",
                        "bq_type" : "STRING"
                    }
                ]
            },
            {
                "es_column": "@timestamp",
                "es_type": "string",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-price_rule_v2",
        "bq": "price_rule",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "mapping": [
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "name",
                "es_type": "string",
                "bq_column": "name",
                "bq_type": "STRING"
            },
            {
                "es_column": "description",
                "es_type": "string",
                "bq_column": "description",
                "bq_type": "STRING"
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "price_rule",
                        "bq_type" : "STRING"
                    }
                ]
            },
            {
                "es_column": "@timestamp",
                "es_type": "string",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "date_created",
                "es_type": "string",
                "bq_column": "date_created",
                "bq_type": "TIMESTAMP",
                "transfromer": "string_to_timestamp"
            },
            {
                "es_column": "date_updated",
                "es_type": "string",
                "bq_column": "date_updated",
                "bq_type": "TIMESTAMP",
                "transfromer": "string_to_timestamp"
            },
            {
                "es_column": "from",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "from_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "from_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "to",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "to_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "to_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "category",
                "es_type": "object",
                "strategy": "foreign_key_array_last",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_category",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "priceGroup",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_price_group",
                        "bq_type": "string"
                    }
                ]
            }
        ]
    },
    {
        "source" : "es",
        "target" : "bq",
        "es": "promoto-price_list_v2",
        "bq": "price_list",
        "sync_batch_size": 100,
        "id_column": "id.keyword",
        "sync_id_column": "id",
        "sync_column": "@timestamp",
        "bridges" : [
            {
                "bq" : "product_pricelist",
                "mapping" : [
                    {
                        "bq_column" : "id_product",
                        "bq_type" : "STRING"
                    },
                    {
                        "bq_column" : "id_price_list",
                        "bq_type" : "STRING"
                    }
                ]
            }       
        ],
        "mapping": [
            {
                "es_column": "priceGroup",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_price_group",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "date_created",
                "es_type": "string",
                "bq_column": "date_created",
                "bq_type": "TIMESTAMP",
                "transfromer": "string_to_timestamp"
            },
            {
                "es_column": "date_updated",
                "es_type": "string",
                "bq_column": "date_updated",
                "bq_type": "TIMESTAMP",
                "transfromer": "string_to_timestamp"
            },
            {
                "es_column": "active",
                "es_type": "boolean",
                "bq_column": "active",
                "bq_type": "BOOL"
            },
            {
                "es_column": "discount",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "int",
                        "bq_column": "discount_value",
                        "bq_type": "INT64"
                    },
                    {
                        "es_column": "dimension",
                        "es_type": "string",
                        "bq_column": "discount_dimenstion",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column" : "tid",
                "es_type" : "array",
                "strategy" : "foreign_key_value_array",
                "fk" : [
                    {
                        "bq_bridge" : "tenant_objects",
                        "bq_primary" : "id",
                        "bq_column" : "id_unknown",
                        "bq_type_column" : "id_type",
                        "bq_id_type" : "price_list",
                        "bq_type" : "STRING"
                    }
                ]
            },
            {
                "es_column": "priceRule",
                "es_type": "object",
                "strategy": "foreign_key_simple",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_price_rule",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column": "@timestamp",
                "es_type": "string",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP"
            },
            {
                "es_column": "from",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "from_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "from_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "to",
                "es_type": "object",
                "strategy": "flat",
                "flatten": [
                    {
                        "es_column": "value",
                        "es_type": "float",
                        "bq_column": "to_value",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "es_column": "currency",
                        "es_type": "string",
                        "bq_column": "to_currency",
                        "bq_type": "STRING"
                    }
                ]
            },
            {
                "es_column": "id",
                "es_type": "string",
                "bq_column": "id",
                "bq_type": "STRING"
            },
            {
                "es_column": "client",
                "es_type": "object",
                "strategy": "foreign_key_array_last",
                "fk": [
                    {
                        "es_column": "id",
                        "es_type": "string",
                        "bq_column": "fk_market",
                        "bq_type": "string"
                    }
                ]
            },
            {
                "es_column" : "products",
                "es_type" : "object",
                "strategy" : "foreign_key_bridge",
                "fk" : [
                    {
                        "es_column" : "id",
                        "es_type" : "string",
                        "bq_bridge" : "product_pricelist",
                        "bq_primary" : "id_price_list",
                        "bq_column" : "id_product",
                        "bq_type" : "STRING"
                    }
                ]
            }
        ]
    },
    {
        "source" : "fb",
        "target" : "bq",
        "fb" : "transactions_1",
        "bq" : "transaction",
        "sync_batch_size" : 100,
        "sync_column" : "updated",
        "sync_column2" : "created",
        "id_column" : "id",
        "bridges" : [
            {
                "source" : "fb",
                "target" : "bq",
                "bq" : "transactionLines",
                "mapping" : [
                    {
                        "fb_column" : "code",
                        "fb_type" : "string",
                        "bq_column" : "code",
                        "bq_type" : "STRING"
                    },
                    {
                        "fb_column": "created",
                        "fb_type": "integer",
                        "bq_column": "created",
                        "bq_type": "TIMESTAMP",
                        "transformer" : "miliseconds_to_timestamp"
                    },
                    {
                        "fb_column": "inPromotion",
                        "fb_type": "bool",
                        "bq_column": "inPromotion",
                        "bq_type": "BOOL"
                    },
                    {
                        "fb_column": "price",
                        "fb_type": "float",
                        "bq_column": "price",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "fb_column": "quantityType",
                        "fb_type": "string",
                        "bq_column": "quantityType",
                        "bq_type": "STRING"
                    },
                    {
                        "fb_column": "quantityValue",
                        "fb_type": "integer",
                        "bq_column": "quantityValue",
                        "bq_type": "FLOAT64"
                    },
                    {
                        "fb_column": "updated",
                        "fb_type": "integer",
                        "bq_column": "updated",
                        "bq_type": "TIMESTAMP",
                        "transformer" : "miliseconds_to_timestamp"
                    },
                    {
                        "fb_column" : "product",
                        "fb_type" : "object",
                        "strategy" : "foreign_key_simple",
                        "fk" : [
                            {
                                "fb_column" : "id",
                                "fb_type" : "string",
                                "bq_column" : "fk_product",
                                "bq_type" : "string"
                            }
                        ]
                    },
                    {
                        "fb_column" : "id",
                        "fb_type" : "object",
                        "strategy" : "foreign_key_parent",
                        "bq_column" : "fk_transaction",
                        "bq_type" : "string"
                    },
                    {
                        "fb_columns": ["updated", "created"],
                        "fb_type": "integer",
                        "strategy" : "formula",
                        "bq_column": "timestamp",
                        "bq_type": "TIMESTAMP",
                        "transformer" : "miliseconds_to_timestamp",
                        "formula" : "updated || created"
                    },
                    {
                        "fb_column" : "id",
                        "fb_type" : "string",
                        "bq_column" : "id",
                        "bq_type" : "STRING"
                    }        
                ]
            }       
        ],
        "mapping" : [
            {
                "fb_column" : "id",
                "fb_type" : "string",
                "bq_column" : "id",
                "bq_type" : "STRING"
            },
            {
                "fb_column": "firebaseTenantId",
                "fb_type": "string",
                "bq_column": "firebaseTenantId",
                "bq_type": "STRING"
            },
            {
                "fb_column": "receiptNumber",
                "fb_type": "int",
                "bq_column": "receiptNumber",
                "bq_type": "INT64"
            },
            {
                "fb_column": "status",
                "fb_type": "string",
                "bq_column": "status",
                "bq_type": "STRING"
            },
            {
                "fb_column": "userId",
                "fb_type": "string",
                "bq_column" : "fk_user",
                "bq_type" : "string"
            },
            {
                "fb_column": "shopId",
                "fb_type": "string",
                "bq_column" : "fk_shop",
                "bq_type" : "string"
            },
            {
                "fb_column": "checkoutId",
                "fb_type": "string",
                "bq_column" : "fk_checkout",
                "bq_type" : "string"
            },
            {
                "fb_column": "updated",
                "fb_type": "integer",
                "bq_column": "updated",
                "bq_type": "TIMESTAMP",
                "transformer" : "miliseconds_to_timestamp"
            },
            {
                "fb_column": "created",
                "fb_type": "integer",
                "bq_column": "created",
                "bq_type" : "CUSTOM",
                "derivatives" :[
                    { "suffix" : "master", "bq_type" : "TIMESTAMP" },
                    { "suffix" : "quarter", "bq_type" : "INT64" },
                    { "suffix" : "half",  "bq_type" : "INT64" },
                    { "suffix" : "year", "bq_type" : "INT64" },
                    { "suffix" : "month", "bq_type" : "INT64" },
                    { "suffix" : "date", "bq_type" : "INT64" },
                    { "suffix" : "day", "bq_type" : "INT64" },
                    { "suffix" : "week",  "bq_type" : "INT64" }                    
                ],
                "transformer" : "timestamp_to_smartdate"
            },
            {
                "fb_columns": ["updated", "created"],
                "fb_type": "integer",
                "strategy" : "formula",
                "bq_column": "timestamp",
                "bq_type": "TIMESTAMP",
                "transformer" : "miliseconds_to_timestamp",
                "formula" : "updated || created"
            },
            {
                "fb_column" : "transactionLines",
                "fb_type" : "array",
                "strategy" : "foreign_table",
                "fb_table" : "transactionLines"
            }
        ]
    }
]